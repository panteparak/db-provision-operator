# Default values for db-provision-operator
# This is a YAML-formatted file.

# -- Number of replicas for the operator deployment
replicaCount: 1

image:
  # -- Image repository
  repository: ghcr.io/panteparak/db-provision-operator
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion
  tag: ""

# -- Image pull secrets for private registries
imagePullSecrets: []

# -- Override the name of the chart
nameOverride: ""

# -- Override the full name of the chart
fullnameOverride: ""

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# -- Pod annotations
podAnnotations:
  kubectl.kubernetes.io/default-container: manager

# -- Pod labels
podLabels:
  control-plane: controller-manager

# -- Pod security context
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# -- Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

resources:
  limits:
    cpu: 500m
    memory: 128Mi
  requests:
    cpu: 10m
    memory: 64Mi

# -- Node selector for pod scheduling
nodeSelector: {}

# -- Tolerations for pod scheduling
tolerations: []

# -- Affinity rules for pod scheduling
affinity: {}

# -- Leader election configuration (simple flag for deployment args)
leaderElect: true

# Leader election RBAC configuration
leaderElection:
  # -- Enable leader election RBAC
  enabled: true

# -- Health probe bind address
healthProbeBindAddress: ":8081"

# -- Metrics bind address
metricsBindAddress: "0"

# Metrics configuration
metrics:
  # -- Enable metrics
  enabled: false
  service:
    # -- Metrics service type
    type: ClusterIP
    # -- Metrics service port
    port: 8443
  serviceMonitor:
    # -- Enable ServiceMonitor
    enabled: false
    # -- ServiceMonitor namespace (defaults to release namespace)
    namespace: ""
    # -- Additional labels for ServiceMonitor
    labels: {}
    # -- Scrape interval
    interval: ""
    # -- Scrape timeout
    scrapeTimeout: ""
    # -- Honor labels
    honorLabels: false
    # -- Relabelings
    relabelings: []
    # -- Metric relabelings
    metricRelabelings: []

# Probes configuration
livenessProbe:
  httpGet:
    path: /healthz
    port: 8081
  initialDelaySeconds: 15
  periodSeconds: 20

readinessProbe:
  httpGet:
    path: /readyz
    port: 8081
  initialDelaySeconds: 5
  periodSeconds: 10

# CRD installation
crds:
  # -- Install CRDs
  install: true
  # -- Keep CRDs on chart uninstall
  keep: true

# Grafana dashboards configuration
grafanaDashboards:
  # -- Enable Grafana dashboards deployment via Grafana Operator CRD
  enabled: false
  # -- Instance selector for GrafanaDashboard CRD
  # Must match labels on your Grafana instance
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  # -- Folder to place dashboards in Grafana
  folder: "Database Provisioning"
  # -- Dashboard-specific configuration
  dashboards:
    overview:
      enabled: true
    instances:
      enabled: true
    databases:
      enabled: true
    users:
      enabled: true
    roles:
      enabled: true
    grants:
      enabled: true
    backups:
      enabled: true
    schedules:
      enabled: true
    restores:
      enabled: true
