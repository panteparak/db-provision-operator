# GrafanaDashboard CRDs for deploying dashboards via the Grafana Operator
# These resources reference the dashboard JSON stored in the ConfigMap generated by Kustomize.
#
# Prerequisites:
# 1. Install the Grafana Operator: https://grafana.github.io/grafana-operator/
# 2. Create a Grafana instance with a label that matches the instanceSelector below
#
# Example Grafana instance:
#   apiVersion: grafana.integreatly.org/v1beta1
#   kind: Grafana
#   metadata:
#     name: grafana
#     labels:
#       dashboards: "grafana"  # This label must match instanceSelector
#   spec: ...
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-overview
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: overview.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-instances
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: instances.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-databases
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: databases.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-users
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: users.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-roles
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: roles.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-grants
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: grants.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-backups
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: backups.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-schedules
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: schedules.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: db-provision-operator-restores
  labels:
    app.kubernetes.io/name: db-provision-operator
    app.kubernetes.io/component: dashboard
spec:
  folder: "Database Provisioning"
  instanceSelector:
    matchLabels:
      dashboards: "grafana"
  configMapRef:
    name: db-provision-operator-dashboards
    key: restores.json
